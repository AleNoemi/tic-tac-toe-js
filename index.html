<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<title>Tic-Tac-Toe.js: redux pattern implemented in vanilla javascript</title>

	<!-- meta -->
	<meta name="description" content="Tic-Tac-Toe game implemented in redux pattern without any javascript framework">
	<meta name="author" content="Ramon Victor">
	<meta name="viewport" content="width=device-width">
	<link rel="shortcut icon" href="favicon.ico" />

	<meta property="og:image" content="http://ramonvictor.github.io/tic-tac-toe-js/img/tic-tac-toe-js-cover.png" />

	<!-- main style -->
	<link href='https://fonts.googleapis.com/css?family=Raleway:700|Lusitana:400,700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="css/style.css">
</head>
<body>
<div class="container">
	<div class="sidebar">
		<div class="iphone-mockup-wrapper">
			<a href="https://rocky-ocean-52527.herokuapp.com/">
				<img src="img/tic-tac-toe-js-mobile.png" width="250" alt="Tic-Tac-Toe.js mobile mockup">
			</a>
			<p class="fz-small ta-center">Click on above image to check demo.</p>
			<div class="github-btn">
				<div class="github-stargazers">
				<iframe src="http://ghbtns.com/github-btn.html?user=ramonvictor&repo=tic-tac-toe-js&type=watch&count=true" allowtransparency="true" frameborder="0" scrolling="0" width="110" height="20"></iframe>
				</div>
				<a href="https://github.com/ramonvictor/tic-tac-toe-js" class="check-on-github">
					Check on Github
				</a>
			</div>
		</div>
	</div>
	<div class="content">
		<h1 class="main-header">Tic-Tac-Toe.js: redux pattern in plain javascript</h1>
		<p>There's this thing going on in the Front-End Developement community where everybody wants to re-write their applications to use React. Sorry to disapoint, but that's not the case here. At work I mostly use vanilla javascript, therefore it is more beneficial for me learning the concepts rather than the frameworks themselves.</p>
		<p>With the amazing help and guidance of <a href="https://github.com/ricardobeat">@ricardobeat</a>, I've managed to build this <a href="https://rocky-ocean-52527.herokuapp.com/">Tic-Tac-Toe</a> game using Redux principles with vanilla javascript. No React, no jQuery, no micro-library, it doesn't rely on anything else. It's just plain JS. Isn't it great? I wanna share in this post how it was possible. Let's get into the details.</p>
		<h2 class="sub-header">The key principles</h2>
		<p>Redux pattern is mainly based on <a href="http://redux.js.org/docs/introduction/ThreePrinciples.html">three fundamental principles</a>:</p>
		<ol>
			<li><strong class="highlight">Single source of truth</strong>
				<p>The state of your whole application is stored in an object tree within a single store.</p>
			</li>
			<li><strong class="highlight">State is read-only</strong>
				<p>The only way to mutate the state is to emit an action, an object describing what happened.</p></li>
			<li><strong class="highlight">Changes are made with pure functions</strong>
				<p>To specify how the state tree is transformed by actions, you write pure reducers.</p>
			</li>
		</ol>

		<h2 class="sub-header">How does it look like on Tic-Tac-Toe.js?</h2>
		<strong class="highlight">1. One single store</strong>
		<p class="mb-shorter">Everything that can affect UI is saved on <a href="https://github.com/ramonvictor/tic-tac-toe-js/blob/master/src/store.js">store.js</a>. Check how the structure looks like:</p>
		<div class="snippet-wrapper">
			<script src="https://gist.github.com/ramonvictor/a293e3bb1462a259ef93623beca86bad.js"></script>
			<p class="ta-right fz-small see-source"><a href="https://github.com/ramonvictor/tic-tac-toe-js/blob/master/src/store.js">Check full source code.</a></p>
		</div>

		<strong class="highlight">2. <a href="https://github.com/ramonvictor/tic-tac-toe-js/blob/master/src/game.js">Game.js</a> dispatches actions whenever needed:</strong>
		<p class="mb-shorter">Let's check what happens, for instance, when user clicks on the table grid:</p>
		<div class="snippet-wrapper">
			<script src="https://gist.github.com/ramonvictor/25c7dbcb159ab5e07fd3516c2096658a.js"></script>
			<p class="ta-right fz-small see-source"><a href="https://github.com/ramonvictor/tic-tac-toe-js/blob/master/src/game.js">Check full source code.</a></p>
		</div>

		<strong class="highlight">3. Reducers receive actions and return new state</strong>
		<p class="mb-shorter">It's also possible to combine multiple reducers.</p>
		<div class="snippet-wrapper">
			<script src="https://gist.github.com/ramonvictor/87d12ce9b59db477fcb6bdbb931b9b86.js"></script>
			<p class="ta-right fz-small see-source"><a href="https://github.com/ramonvictor/tic-tac-toe-js/blob/master/src/store.js#L29">Check full source code.</a></p>
		</div>

		<strong class="highlight">4. Render UI when store gets updated</strong>
		<p class="mb-shorter">It's pretty straightforward. Every time store gets updated it emits an event so that the aplication can render the UI accordingly.</p>
		<div class="snippet-wrapper">
			<script src="https://gist.github.com/ramonvictor/e20894711a0524a6ce43cc4c2344dbbd.js"></script>
			<p class="ta-right fz-small see-source"><a href="https://github.com/ramonvictor/tic-tac-toe-js/blob/master/src/game.js#L92">Check full source code.</a></p>
		</div>
		<p>In the above case I'm doing it slightly different compared to <code>store.subscribe(render)</code> on <a href="http://redux.js.org/docs/basics/Store.html">Redux</a>. I'm actually triggering a global event and letting the game.js render the callback whenever necessary.</p>
		<p>The important thing here is that we stick with the correct data flow. Which brings me to next topic.</p>

		<h2 class="sub-header">Strict unidirectional data flow</h2>
		<p>Maybe you haven't noticed, but on previous examples the data flow is ways unidirectional. View (game.js) dispatch actions, store.js receives and process them with reducers which later triggers <code>'store:update'</code> so finally we can render the UI updates.</p>
		<p>You can read more about Data Flow on <a href="http://redux.js.org/docs/basics/DataFlow.html">redux.js.org.</a></p>

		<h2 class="sub-header">How about the back-end?</h2>
		<p>This was one of the coolest things about Redux. Since everything is based on dispatching actions, which are by definition simple JSON objects, it was quite easy to make Tic-Tac-Toe.js a multiplayer game.</p>
		<p>Node.js was obviously my choice. With just a few lines of code I could make a broadcast service on the backend. It also handles room ids and everything. Works like a charm! :)</p>
		<div class="snippet-wrapper">
			<script src="https://gist.github.com/ramonvictor/4696208b06f954782e9111043cefbe90.js"></script>
			<p class="ta-right fz-small see-source"><a href="https://github.com/ramonvictor/tic-tac-toe-js/blob/master/index.js">Check full source code.</a></p>
		</div>

		<h2 class="sub-header">Learnings</h2>
		<p>Redux has proven to be very easy to debug and fix issues for me. You have one single entity that represents the state of your application and the only way you can change it is by dispatching actions. I was also surprised how fast it was to integrate with a NodeJs server and make it broadcat certain actions to the front-end.</p>
		<p>I've learned a lot of cool things working on this project and I holp you find this post useful. <a href="https://github.com/ramonvictor/tic-tac-toe-js">Check out Tic-Tac-Toe.js on github</a> and have fun! :)</p>

		<div class="comments-wrapper">
			<h3 class="sub-header-3">Leave a comment</h3>
			<div id="disqus_thread"></div>
			<script>
				/**
				*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
				*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
				*/
				var disqus_config = function() {
					this.page.url = 'http://ramonvictor.github.io/tic-tac-toe-js/';  // Replace PAGE_URL with your page's canonical URL variable
					this.page.identifier = 'github.io/tic-tac-toe-js/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
				};

				(function() {  // REQUIRED CONFIGURATION VARIABLE: EDIT THE SHORTNAME BELOW
					var d = document, s = d.createElement('script');
					s.src = '//ramonvictor.disqus.com/embed.js';  // IMPORTANT: Replace EXAMPLE with your forum shortname!
					s.setAttribute('data-timestamp', +new Date());
					(d.head || d.body).appendChild(s);
				})();
			</script>
		</div>
	</div>
</div>
</body>
</html>